<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="category">
	<select id="selectCategory" parameterType="int" resultType="CategoryVo">
		<![CDATA[
			select  cate_no cateNo,
					user_no userNo,
					cate_name cateName,
					group_no groupNo,
					order_no orderNo,
					depth
			from category
		]]>
	</select>
	
	<!--상위폴더생성  -->
	<insert id="addMainFolder" parameterType="CategoryVo">
		<![CDATA[
			INSERT INTO category
			VALUES (seq_cate_no.nextval, #{userNo}, #{cateName}, seq_cate_no.CURRVAL, 1, 0)
		]]>
	</insert>
	
	<!-- 하위폴더 생성 -->
	<insert id="addSubFolder" parameterType="CategoryVo">
		<![CDATA[
			INSERT INTO category
			VALUES (seq_cate_no.nextval, #{userNo}, #{cateName}, , seq_order_no.nextval, 1)
		]]>
	</insert> 
	
	<select id="selectProblem" parameterType="int" resultType="com.javaex.vo.ProblemVo">
		<![CDATA[
			select  c.cate_no cateNo,
			         p.problem_no problemNo,
			         p.problem_title problem_title,
			         p.type type,
			         p.reg_date reg_date
			from problem p, category c
			where p.cate_no = c.cate_no
			and p.cate_no = #{cate_no}
		]]>
	</select>
	
</mapper>
